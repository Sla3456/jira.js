!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=0)}([function(t,r,e){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});const i=e(1),s=n(e(2)),u=o(e(3));var a;!function(t){t.HS256="HS256",t.HS384="HS384",t.HS512="HS512"}(a=r.Algorithm||(r.Algorithm={}));const h={HS256:"sha256",HS384:"sha384",HS512:"sha512"};r.fromExpressRequest=function(t){const r=(t.originalUrl?u.parse(t.originalUrl).pathname:t.path)||void 0;return{method:t.method,pathname:r,query:t.query,body:t.body}},r.fromMethodAndUrl=function(t,r){const e=u.parse(r,!0);return{method:t,pathname:e.pathname||void 0,query:e.query}},r.fromMethodAndPathAndBody=function(t,r,e){return{method:t,pathname:u.parse(r,!1).pathname||void 0,body:e}};function c(t,r,e){return function(t){return t.method.toUpperCase()}(t)+"&"+function(t,r){let e=t.pathname;const n=new s.default(r).path();e&&0===e.indexOf(n)&&(e=e.slice(n.length));if(!e||0===e.length)return"/";e=e.replace(new RegExp("&","g"),g("&")),"/"!==e[0]&&(e="/"+e);e.length>1&&"/"===e[e.length-1]&&(e=e.substring(0,e.length-1));return e}(t,e)+"&"+function(t,r){let e=t.query;const n=t.method.toUpperCase();!r||0!==Object.keys(e||{}).length||"POST"!==n&&"PUT"!==n||(e=t.body);const o=new Array,i=Object.assign({},e);if(0!==Object.keys(i).length){delete i.jwt;const t=Object.keys(i);t.sort(),t.forEach(t=>{if("__proto__"===t)return;const r=i[t];let e="";Array.isArray(r)?(r.sort(),e=r.map(g).join(",")):e=g(r),o.push(g(t)+"="+e)})}return o.join("&")}(t,r)}function f(t,r){if(!t)throw new Error("Require key");const e=r||"HS256",n=function(t){switch(t){case"HS256":return a.HS256;case"HS384":return a.HS384;case"HS512":return a.HS512;default:return}}(e);if(!n)throw new Error('Algorithm "'+r+'" is not supported');const o=h[n];if(!o)throw new Error('Algorithm "'+r+'" is not supported');return[e,o]}function p(t,r,e){return d(i.createHmac(e,r).update(t).digest("base64"))}function l(t){return Buffer.from(function(t){return(t+=Array(5-t.length%4).join("=")).replace(/\-/g,"+").replace(/_/g,"/")}(t),"base64").toString()}function y(t){return d(Buffer.from(t).toString("base64"))}function d(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function g(t){return encodeURIComponent(t).replace(/[!'()]/g,escape).replace(/\*/g,"%2A")}r.version="1.0.3",r.decode=function(t,r,e){const n=t.split(".");if(3!==n.length)throw new Error("Not enough or too many JWT token segments; should be 3");const o=n[0],i=n[1],s=n[2],u=JSON.parse(l(o)),a=JSON.parse(l(i));return a.aud&&!Array.isArray(a.aud)&&(a.aud=[a.aud]),e||function(t,r,e,n,o){const[,i]=f(n,o),s=[t,r].join(".");if(e!==p(s,n,i))throw new Error("Signature verification failed for input: "+s+" with method "+i)}(o,i,s,r,u.alg),a},r.encode=function(t,r,e){const[n,o]=f(r,e),i={typ:"JWT",alg:n},s=[];return s.push(y(JSON.stringify(i))),s.push(y(JSON.stringify(t))),s.push(p(s.join("."),r,o)),s.join(".")},r.createCanonicalRequest=c,r.createQueryStringHash=function(t,r,e){return i.createHash(h.HS256).update(c(t,r,e)).digest("hex")}},function(t,r){t.exports=require("crypto")},function(t,r,e){var n;
/*!
 * jsUri
 * https://github.com/derek-watson/jsUri
 *
 * Copyright 2013, Derek Watson
 * Released under the MIT license.
 *
 * Includes parseUri regular expressions
 * http://blog.stevenlevithan.com/archives/parseuri
 * Copyright 2007, Steven Levithan
 * Released under the MIT license.
 */!function(o){var i={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};function s(t){return t&&(t=t.toString().replace(i.pluses,"%20"),t=decodeURIComponent(t)),t}function u(t){var r,e,n,o,u,a,h,c=[];if(null==t||""===t)return c;for(0===t.indexOf("?")&&(t=t.substring(1)),r=0,h=(e=t.toString().split(i.query_separator)).length;r<h;r++)0!==(o=(n=e[r]).indexOf("="))&&(u=s(n.substring(0,o)),a=s(n.substring(o+1)),c.push(-1===o?[n,null]:[u,a]));return c}function a(t){this.uriParts=function(t){var r=i.uri_parser.exec(t||""),e={};return["source","protocol","authority","userInfo","user","password","host","port","isColonUri","relative","path","directory","file","query","anchor"].forEach((function(t,n){e[t]=r[n]||""})),e}(t),this.queryPairs=u(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}Array.prototype.forEach||(Array.prototype.forEach=function(t,r){var e,n;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(e=r),n=0;n<i;){var s;n in o&&(s=o[n],t.call(e,s,n,o)),n++}}),["protocol","userInfo","host","port","path","anchor"].forEach((function(t){a.prototype[t]=function(r){return void 0!==r&&(this.uriParts[t]=r),this.uriParts[t]}})),a.prototype.hasAuthorityPrefix=function(t){return void 0!==t&&(this.hasAuthorityPrefixUserPref=t),null===this.hasAuthorityPrefixUserPref?-1!==this.uriParts.source.indexOf("//"):this.hasAuthorityPrefixUserPref},a.prototype.isColonUri=function(t){if(void 0===t)return!!this.uriParts.isColonUri;this.uriParts.isColonUri=!!t},a.prototype.query=function(t){var r,e,n,o="";for(void 0!==t&&(this.queryPairs=u(t)),r=0,n=this.queryPairs.length;r<n;r++)e=this.queryPairs[r],o.length>0&&(o+="&"),null===e[1]?o+=e[0]:(o+=e[0],o+="=",void 0!==e[1]&&(o+=encodeURIComponent(e[1])));return o.length>0?"?"+o:o},a.prototype.getQueryParamValue=function(t){var r,e,n;for(e=0,n=this.queryPairs.length;e<n;e++)if(t===(r=this.queryPairs[e])[0])return r[1]},a.prototype.getQueryParamValues=function(t){var r,e,n,o=[];for(r=0,n=this.queryPairs.length;r<n;r++)t===(e=this.queryPairs[r])[0]&&o.push(e[1]);return o},a.prototype.deleteQueryParam=function(t,r){var e,n,o,i,u,a=[];for(e=0,u=this.queryPairs.length;e<u;e++)o=s((n=this.queryPairs[e])[0])===s(t),i=n[1]===r,(1!==arguments.length||o)&&(2!==arguments.length||o&&i)||a.push(n);return this.queryPairs=a,this},a.prototype.addQueryParam=function(t,r,e){return 3===arguments.length&&-1!==e?(e=Math.min(e,this.queryPairs.length),this.queryPairs.splice(e,0,[t,r])):arguments.length>0&&this.queryPairs.push([t,r]),this},a.prototype.hasQueryParam=function(t){var r,e=this.queryPairs.length;for(r=0;r<e;r++)if(this.queryPairs[r][0]==t)return!0;return!1},a.prototype.replaceQueryParam=function(t,r,e){var n,o,i=-1,u=this.queryPairs.length;if(3===arguments.length){for(n=0;n<u;n++)if(s((o=this.queryPairs[n])[0])===s(t)&&decodeURIComponent(o[1])===s(e)){i=n;break}i>=0&&this.deleteQueryParam(t,s(e)).addQueryParam(t,r,i)}else{for(n=0;n<u;n++)if(s((o=this.queryPairs[n])[0])===s(t)){i=n;break}this.deleteQueryParam(t),this.addQueryParam(t,r,i)}return this},["protocol","hasAuthorityPrefix","isColonUri","userInfo","host","port","path","query","anchor"].forEach((function(t){var r="set"+t.charAt(0).toUpperCase()+t.slice(1);a.prototype[r]=function(r){return this[t](r),this}})),a.prototype.scheme=function(){var t="";return this.protocol()?(t+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(t+=":"),t+="//"):this.hasAuthorityPrefix()&&this.host()&&(t+="//"),t},a.prototype.origin=function(){var t=this.scheme();return this.userInfo()&&this.host()&&(t+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(t+="@")),this.host()&&(t+=this.host(),(this.port()||this.path()&&this.path().substr(0,1).match(/[0-9]/))&&(t+=":"+this.port())),t},a.prototype.addTrailingSlash=function(){var t=this.path()||"";return"/"!==t.substr(-1)&&this.path(t+"/"),this},a.prototype.toString=function(){var t,r=this.origin();return this.isColonUri()?this.path()&&(r+=":"+this.path()):this.path()?(t=this.path(),i.ends_with_slashes.test(r)||i.starts_with_slashes.test(t)?(r&&r.replace(i.ends_with_slashes,"/"),t=t.replace(i.starts_with_slashes,"/")):r+="/",r+=t):this.host()&&(this.query().toString()||this.anchor())&&(r+="/"),this.query().toString()&&(r+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(r+="#"),r+=this.anchor()),r},a.prototype.clone=function(){return new a(this.toString())},void 0===(n=function(){return a}.call(r,e,r,t))||(t.exports=n)}()},function(t,r){t.exports=require("url")}]);